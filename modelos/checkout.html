<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Minha Loja Virtual</title>
  <link rel="stylesheet" href="modelo-1.css">
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header>
    <div class="logo">
      <a href="modelo-1.html">Minha Loja</a>
    </div>
    <nav>
      <ul>
        <li><a href="modelo-1.html">In√≠cio</a></li>
        <li><a href="carrinho.html" class="cart">üõí (0)</a></li>
        <li><a href="contato.html">Contato</a></li>
        <li><a href="login.html">Login</a></li>
      </ul>
    </nav>
  </header>

  <!-- ===== MAIN ===== -->
  <main>
    <h1>Finalizar Compra</h1>

    <!-- Resumo do pedido -->
    <section id="resumo-pedido">
      <h2>Resumo do Pedido</h2>
      <div id="lista-checkout"></div>
      <p><strong>Total: <span id="total-checkout">R$ 0,00</span></strong></p>
    </section>

    <!-- Formul√°rio de pagamento -->
    <section>
      <h2>Dados de Pagamento</h2>
      <form onsubmit="finalizarCompra(event)">
        <label for="nome">Nome no Cart√£o:</label>
        <input type="text" id="nome" required>

        <label for="numero">N√∫mero do Cart√£o:</label>
        <input type="text" id="numero" maxlength="16" required>

        <label for="validade">Validade:</label>
        <input type="month" id="validade" required>

        <label for="cvv">CVV:</label>
        <input type="text" id="cvv" maxlength="3" required>

        <button type="submit" class="btn-finalizar">Confirmar Pagamento</button>
      </form>
    </section>

    <div id="mensagem" class="mensagem-oculta"></div>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p>&copy; 2025 - Minha Loja Virtual</p>
  </footer>

  <!-- ===== SCRIPT ===== -->
  <script>
  const PRODUTOS = {
    1: { nome: "Camisa Pok√©mon", preco: 79.90, imagem: "images-2/Camisa-Pokemon.webp" },
    2: { nome: "Caneca Gamer", preco: 39.90, imagem: "images-2/Caneca-Gamer.webp" },
    3: { nome: "Mouse RGB", preco: 129.90, imagem: "images-2/Mouse-RGB.webp" },
    4: { nome: "Headset Pro", preco: 199.90, imagem: "images-2/Headset-Pro.webp" }
  };

  let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

  function carregarCheckout() {
    const container = document.getElementById("lista-checkout");
    const totalEl = document.getElementById("total-checkout");
    container.innerHTML = "";
    let total = 0;

    if (carrinho.length === 0) {
      container.innerHTML = "<p>Seu carrinho est√° vazio.</p>";
      totalEl.textContent = "R$ 0,00";
      return;
    }

    carrinho.forEach(item => {
      const produto = PRODUTOS[item.id];
      if (!produto) return;
      const qtd = item.quantidade || 1;

      const div = document.createElement("div");
      div.className = "item-checkout";
      div.innerHTML = `
        <img src="${produto.imagem}" alt="${produto.nome}" width="50">
        <span>${produto.nome}</span>
        <span>Qtd: ${qtd}</span>
        <span>Subtotal: R$ ${(produto.preco * qtd).toFixed(2)}</span>
      `;
      container.appendChild(div);
      total += produto.preco * qtd;
    });

    totalEl.textContent = `R$ ${total.toFixed(2)}`;
  }

  function finalizarCompra(event) {
    event.preventDefault();
    if (carrinho.length === 0) {
      alert("Seu carrinho est√° vazio!");
      return;
    }

    // Salva o pedido final
    localStorage.setItem("pedido-final", JSON.stringify(carrinho));

    // Limpa carrinho
    carrinho = [];
    localStorage.removeItem("carrinho");

    // Redireciona
    setTimeout(() => window.location.href = "pedido-confirmado.html", 1500);
  }

  document.addEventListener("DOMContentLoaded", carregarCheckout);
</script>

</body>
</html>
